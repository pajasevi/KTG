$(function(){if($(window).resize(function(){KTG.resizeToCover()}),$(window).trigger("resize"),Modernizr.video&&!KTG.isMobile()&&"true"!=$.cookie("no-video")){$.cookie("no-video","false",{path:"/"}),KTG.videos={introVideo:videojs("introVideo"),czBlinkOnVideo:videojs("czBlinkOnVideo"),czBlinkOffVideo:videojs("czBlinkOffVideo"),enBlinkOnVideo:videojs("enBlinkOnVideo"),enBlinkOffVideo:videojs("enBlinkOffVideo"),czParkVideo:videojs("czParkVideo"),enParkVideo:videojs("enParkVideo")},KTG.VideoController=function(){(function(){this.isIdle()&&(this.currentState=this.line.pop())}).bind(this);return{push:function(e){this.line.push(e),this.handleLine()}}};var e=new KTG.VideoController;e.push("intro"),KTG.getState=function(){return KTG.state},KTG.setState=function(e){KTG.state=e,console.log(e)},KTG.sound=document.getElementById("backgroundSound"),KTG.muteSound=function(){$.each(KTG.videos,function(e,n){n.muted(!0),$(".mute-button").removeClass("mute-on").addClass("mute-off")}),KTG.sound.muted=!0},KTG.unMuteSound=function(){$.each(KTG.videos,function(e,n){n.muted(!1),$(".mute-button").removeClass("mute-off").addClass("mute-on")}),KTG.sound.muted=!1},KTG.checkMute=function(){"true"==$.cookie("muted")&&KTG.muteSound()},KTG.setState("off"),KTG.videos.introVideo.play(),KTG.checkMute(),KTG.videos.introVideo.on("ended",function(){KTG.appendFirst(),KTG.sound.play()}),$(document).on("mousemove",function(e){var n=$(e.target);n.hasClass("lang-link cz")&&"off"==KTG.getState()&&(KTG.setState("cz-blink-on"),$("#czBlinkOnVideo").show(function(){KTG.videos.czBlinkOnVideo.play()})),n.hasClass("lang-link en")&&"off"==KTG.getState()&&(KTG.setState("en-blink-on"),$("#enBlinkOnVideo").show(function(){KTG.videos.enBlinkOnVideo.play()})),n.hasClass("first-ended no-controls")&&"cz-blink-off"==KTG.getState()&&KTG.videos.czBlinkOffVideo.play(),n.hasClass("first-ended no-controls")&&"en-blink-off"==KTG.getState()&&KTG.videos.enBlinkOffVideo.play()}),KTG.videos.czBlinkOnVideo.on("ended",function(){KTG.setState("cz-blink-off"),$("#czBlinkOnVideo").hide(),$("#czBlinkOffVideo").show(),KTG.videos.czParkVideo.currentTime(1)}),KTG.videos.czBlinkOffVideo.on("ended",function(){KTG.setState("off"),$("#czBlinkOffVideo").hide(function(){KTG.videos.czBlinkOnVideo.currentTime(0),KTG.videos.czBlinkOffVideo.currentTime(0),KTG.videos.czParkVideo.currentTime(0)})}),KTG.videos.enBlinkOnVideo.on("ended",function(){KTG.setState("en-blink-off"),$("#enBlinkOnVideo").hide(),$("#enBlinkOffVideo").show(),KTG.videos.enParkVideo.currentTime(1)}),KTG.videos.enBlinkOffVideo.on("ended",function(){KTG.setState("off"),$("#enBlinkOffVideo").hide(function(){KTG.videos.enBlinkOnVideo.currentTime(0),KTG.videos.enBlinkOffVideo.currentTime(0),KTG.videos.enParkVideo.currentTime(0)})}),$(".lang-link.cz").on("click",function(e){e.preventDefault(),$("#czParkVideo").show(function(){KTG.videos.czParkVideo.play(),KTG.hideFirst(),KTG.setState("park-video")})}),$(".lang-link.en").on("click",function(e){e.preventDefault(),$("#enParkVideo").show(function(){KTG.videos.enParkVideo.play(),KTG.hideFirst(),KTG.setState("park-video")})}),KTG.videos.czParkVideo.on("ended",function(){window.location.href+="cz/"}),KTG.videos.enParkVideo.on("ended",function(){window.location.href+="en/"})}else $("#video-wrap").remove(),$("html").addClass("video-declined"),$(".mute-button").remove(),KTG.videoDeclined=!0,KTG.appendFirst(),$.cookie("no-video","true",{path:"/"}),$(".lang-link.cz").on("click",function(e){e.preventDefault(),window.location.href+="cz/"}),$(".lang-link.en").on("click",function(e){e.preventDefault(),window.location.href+="en/"}),$(".lang-link.cz").on("mouseover",function(){$("html").addClass("cz")}),$(".lang-link.cz").on("mouseout",function(){$("html").removeClass("cz")}),$(".lang-link.en").on("mouseover",function(){$("html").addClass("en")}),$(".lang-link.en").on("mouseout",function(){$("html").removeClass("en")});$(".video-switcher.off").on("click",function(){$.cookie("no-video","true",{path:"/"}),window.location.reload()}),$(".video-switcher.on").on("click",function(){$.removeCookie("no-video",{path:"/"}),window.location.reload()}),$(".lang-link.cz").on("mouseover",function(){$(".tooltip.cz").animate({opacity:1,top:"-=10"},300)}),$(".lang-link.cz").on("mouseout",function(){$(".tooltip.cz").animate({opacity:0,top:"+=10"},300)}),$(".lang-link.en").on("mouseover",function(){$(".tooltip.en").animate({opacity:1,top:"-=10"},300)}),$(".lang-link.en").on("mouseout",function(){$(".tooltip.en").animate({opacity:0,top:"+=10"},300)}),$(".mute-button").on("click",function(e){e.preventDefault(),$(this).hasClass("mute-on")?(KTG.muteSound(),$.cookie("muted","true")):(KTG.unMuteSound(),$.cookie("muted","false"))})});